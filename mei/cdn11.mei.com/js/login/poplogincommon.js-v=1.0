var loginbaseUrl=$("#contextPath").val();String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};function getCookie(e){var d=document.cookie;var b=d.indexOf(e);if(b!=-1){b+=e.length+1;var c=d.indexOf(";",b);if(c==-1){c=d.length}var a=unescape(d.substring(b,c))}return a}$().ready(function(){$("#bodyDivID").find("#rdm").click();getLoginPopupImageMessage()});function getLoginPopupImageMessage(){$.ajax({type:"post",datatype:"json",async:false,url:loginbaseUrl+"/home/getImageMessage",data:{imageType:"login2"},success:function(b){var a="../../images/login/img_ren1.png"/*tpa=http://cdn11.mei.com/images/login/img_ren1.png*/;if(b.errorNum=="0"){if(b.image==""){$(".login_content1").css("background","url("+a+") no-repeat #f0f1f3")}else{$(".login_content1").css("background","url("+b.image+") no-repeat  #f0f1f3")}}else{$(".login_content1").css("background","url("+a+") no-repeat #f0f1f3")}},error:function(){}})}function getRandom(a){$("#bodyDivID").find("#rdm").attr("src",a+"/user/getRandom?"+Math.random())}function getResetRandom(a,b){$("#bodyDivID").find("#rdm").attr("src",a+"/user/getRandom?"+Math.random());$(b).val("")}function tosendMessage(a){$.ajax({type:"post",datatype:"json",url:loginbaseUrl+"/user/tosendEmail",success:function(b){str_result=b.result},error:function(){str_result="fail"},data:{registNo:a}})}function AccountIsHad(a){var b="";b="no";return b}function checkRandom(c,b){if(c===""||c===""){if(b==="random"){$("#Rdm_errorLogin1").text("请输入验证码")}else{if(b==="random0"){$("#Rdm_errorImg1").text("请输入验证码")}else{if(b==="random1"){$("#Rdm_errorTel1").text("请输入您收到的短信验证码")}else{if(b==="random2"){$("#Rdm_errorMgmImg1").text("请输入验证码")}else{if(b==="random3"){$("#Rdm_errorMgmTel1").text("请输入您收到的短信验证码")}}}}}return false}else{var d=c;if(d.length===6||d.length===5||d.length==4){$("#bodyDivID").find(".Rdm_error").text("");var e=null;$.ajax({type:"post",datatype:"json",async:false,url:loginbaseUrl+"/user/toCheckRandom",success:function(f){e=f.result},error:function(){e="fail"},data:{random:c}});if(e==="yes"){if(b==="random"){$("#Rdm_errorLogin1").text("")}else{if(b==="random0"){$("#Rdm_errorImg1").text("")}else{if(b==="random1"){$("#Rdm_errorTel1").text("")}else{if(b==="random2"){$("#Rdm_errorMgmImg1").text("")}else{if(b==="random3"){$("#Rdm_errorMgmTel1").text("")}}}}}return true}else{var a=$("#bodyDivID").find("#rdm_img").attr("class");if(b==="random"){$("#Rdm_errorLogin1").text("请输入正确的验证码")}else{if(b==="random0"){$("#Rdm_errorImg1").text("请输入正确的验证码")}else{if(b==="random1"){$("#Rdm_errorTel1").text("请输入正确的验证码")}else{if(b==="random2"){$("#Rdm_errorMgmImg1").text("请输入正确的验证码")}else{if(b==="random3"){$("#Rdm_errorMgmTel1").text("请输入正确的验证码")}}}}}return false}}else{if(b==="random"){$("#Rdm_errorLogin1").text("请输入正确的验证码")}else{if(b==="random0"){$("#Rdm_errorImg1").text("请输入正确的验证码")}else{if(b==="random1"){$("#Rdm_errorTel1").text("请输入正确的验证码")}else{if(b==="random2"){$("#Rdm_errorMgmImg1").text("请输入正确的验证码")}else{if(b==="random3"){$("#Rdm_errorMgmTel1").text("请输入正确的验证码")}}}}}return false}}return true}function checkRPassword(a,b){if(a===""||a===null){$("#RPwd_error1").text("请重复输入您的密码");$("#lowPwd1").text("");return false}else{if(a===b){$("#RPwd_error1").text("");return true}else{$("#RPwd_error1").text("密码和确认密码不一致，请重新输入");$("#lowPwd1").text("");return false}}}function CharMode(a){if(a>=48&&a<=57){return 1}if(a>=65&&a<=90){return 2}if(a>=97&&a<=122){return 4}else{return 8}}function bitTotal(a){var b=0;for(i=0;i<4;i++){if(a&1){b++}a>>>=1}return b}function checkStrong(f){var d=0;var c=0;var e=0;var g=0;var b=0;for(i=0;i<f.length;i++){d=CharMode(f.charCodeAt(i));switch(d){case 1:e++;break;case 2:b++;break;case 4:c++;break;case 8:g++;break}}var a=0;if((e>0&&c===0&&g===0&&b===0)||(e===0&&c>0&&g===0&&b===0)||(e===0&&c===0&&g>0&&b===0)||(e===0&&c===0&&g===0&&b>0)){a=0}else{if((e>0&&c>0&&g===0&&b===0)||(e>0&&g>0&&c===0&&b===0)||(c>0&&g>0&&e===0&&b===0)||(c===0&&g===0&&e>0&&b>0)||(c>0&&g===0&&e===0&&b>0)||(c===0&&g>0&&e===0&&b>0)){a=1}else{if((e>0&&c>0&&g>0&&b===0)||(e===0&&c>0&&g>0&&b>0)||(e>0&&c===0&&g>0&&b>0)||(e>0&&c>0&&g===0&&b>0)||(e>0&&c>0&&g>0&&b>0)){a=2}}}return a}function pwStrength(b){checkPassWord(b,"regist");if(b.length>0){$("#bodyDivID").find("#lowMHight").removeClass("hidstyle");$("#bodyDivID").find("#lowMHight").addClass("showstyle")}else{$("#bodyDivID").find("#lowMHight").addClass("hidstyle");$("#bodyDivID").find("#lowMHight").removeClass("showstyle")}var a=checkStrong(b);switch(a){case 0:if(b.length===6){$("#lowPwd1").text("密码较弱，建议设置多种字符组成的复杂密码")}$("#bodyDivID").find("#low").css("background-color","#000");$("#bodyDivID").find("#middle").css("background-color","#929292");$("#bodyDivID").find("#height").css("background-color","#929292");break;case 1:$("#lowPwd1").text("");$("#bodyDivID").find("#low").css("background-color","#000");$("#bodyDivID").find("#middle").css("background-color","#000");$("#bodyDivID").find("#height").css("background-color","#929292");break;case 2:$("#lowPwd1").text("");$("#bodyDivID").find("#low").css("background-color","#000");$("#bodyDivID").find("#middle").css("background-color","#000");$("#bodyDivID").find("#height").css("background-color","#000");break;default:$("#lowPwd1").text("");$("#bodyDivID").find("#low").css("background-color","#000");$("#bodyDivID").find("#middle").css("background-color","#000");$("#bodyDivID").find("#height").css("background-color","#000");break}return}function toSendSMS(d,b){$.ajax({type:"post",datatype:"json",async:false,url:loginbaseUrl+"/user/getPhoneValidateCode",success:function(g){},error:function(){str_reuslt="fail"}});var a=null;var f=$("#bodyDivID").find("#userAccount1").val();var c=$("#randomTelCheckCode").val();var e;if(b==="yes"){e=$("#randomMgmImg1").val()}else{e=$("#randomImg1").val()}$.ajax({type:"post",datatype:"json",async:false,url:loginbaseUrl+"/user/toSendSMS",success:function(g){a=g.result;$("#randomTelCheckCode").val(g.randomTelCheckCode)},error:function(){str_reuslt="fail"},data:{tel_no:f,sendtype:d,randomTelCheckCode:c,randomImg:e}});if(a==="nosendImg"){$("#Rdm_errorImg1").text("请输入正确的验证码");$("#Rdm_errorMgmImg1").text("请输入正确的验证码")}else{if(a==="yesTel"){$("#Act_error1").text("该手机号已注册")}else{start()}}}function toSendOtherSMS(c){start();$.ajax({type:"post",datatype:"json",async:false,url:loginbaseUrl+"/user/getPhoneValidateCode",success:function(e){},error:function(){str_reuslt="fail"}});var a=null;var d=$("#bodyDivID").find("#userAccount1").val();var b=$("#randomTelCheckCode").val();$.ajax({type:"post",datatype:"json",async:false,url:loginbaseUrl+"/user/toSendOtherSMS",success:function(e){a=e.result;$("#randomTelCheckCode").val(e.randomTelCheckCode)},error:function(){str_reuslt="fail"},data:{tel_no:d,sendtype:c,randomTelCheckCode:b}})}var wait=60;function time(){if(wait===0){$("#bodyDivID").find(".rsendRandm").addClass("showstyle");$("#bodyDivID").find(".rsendRandm").removeClass("hidstyle");$("#bodyDivID").find(".sendRandm").addClass("hidstyle");$("#bodyDivID").find(".sendRandm").removeClass("showstyle");$("#bodyDivID").find(".ma").addClass("hidstyle");$("#bodyDivID").find(".ma").removeClass("showinline");wait=60}else{$("#bodyDivID").find(".sendRandm").addClass("hidstyle");$("#bodyDivID").find(".sendRandm").removeClass("showstyle");$("#bodyDivID").find(".rsendRandm").removeClass("showstyle");$("#bodyDivID").find(".rsendRandm").addClass("hidstyle");$("#bodyDivID").find(".ma").addClass("showinline");$("#bodyDivID").find(".ma").removeClass("hidstyle");$("#bodyDivID").find(".times").text(wait);wait--;setTimeout(function(){time()},1000)}}function start(){time()}function Setcookie(a,c){var b=new Date();b.setTime(b.getTime()+365*24*60*60*1000);document.cookie=a+"="+c+";expires="+b.toGMTString()+";path=/"}String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};function goldlogRecord(a,d,c,b){if(typeof(goldlog)=="object"){goldlog.record(a,d,c,b)}};